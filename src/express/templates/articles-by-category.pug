extends layouts/layout.pug

block content
  main.articles-category
    h1= currentCategory.title
    section.articles-category__theme-list
      h2.visually-hidden Список тем
      ul.themes
        each category in categories
          li.themes__item
            a.themes__item-link(href=`/articles/category/${category.id}`,
              class= currentCategory.id === category.id ? `themes__item-link--active` : ``)= category.title
              sup= category.articlesCount
    section.articles-category__list.preview
      h2.visually-hidden Список превью статей
      ul.preview__list
        each article in articles
          li.preview__item
            ul.preview__breadcrumbs
              each category in article.categories
                li.preview__breadcrumbs-item
                  a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`)= category.title
            .preview__background
              img.preview__background-image(src='/img/skyscraper@1x.jpg', width='460', height='240',
                srcset='/img/skyscraper@1x.jpg, /img/skyscraper@2x.jpg 2x', alt='Фотография небоскреба')
            time.preview__time(datetime='2019-03-21T20:33')= article.date_create
            h3.preview__name
              a.preview__name-link(href='#')= article.title
            p.preview__text= article.announce
            a.preview__comment(href='#')
              | Комментарии
              span.preview__cloud
              |
              b.preview__comment-count= article.comments.length
      if pagination.isActive
        .preview__toggle-wrapper
          ul.preview__pagination.pagination
            li
              a(href=`/articles/category/${currentCategory.id}/?page=${pagination.prev.page}`, aria-label="Страница назад",
                class=`pagination__button button button--backwards ${pagination.prev.status ? `` : `button--disabled`}`) Назад
            each item in pagination.pages
              li(class=`pagination__item ${item.isActive ? `pagination__item--active` : ``}`)
                if item.isActive
                  a= item.page
                else
                  a(href=`/articles/category/${currentCategory.id}/?page=${item.page}`)= item.page
            li
              a(href=`/articles/category/${currentCategory.id}?page=${pagination.next.page}`, aria-label="Страница вперёд",
                class=`pagination__button button button--forward ${pagination.next.status ? `` : `button--disabled`}`) Вперед
