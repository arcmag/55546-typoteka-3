extends layouts/layout.pug

block content
  main.main-page
    h1.visually-hidden –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ª–∏—á–Ω–æ–≥–æ –±–ª–æ–≥–∞ –¢–∏–ø–æ—Ç–µ–∫–∞
    p.
      –≠—Ç–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–ª–æ–≥–∞ üëè!
    section.main-page__theme-list
      h2.visually-hidden –°–ø–∏—Å–æ–∫ —Ç–µ–º
      ul.themes
        each category in categories
          if category.articlesCount > 0
            li.themes__item
              a.themes__item-link(href=`/articles/category/${category.id}`)= category.title
                sup= category.articlesCount
    .main-page__section-flex
      section.main-page__hot.hot
        h2.hot__name
          | –°–∞–º–æ–µ –æ–±—Å—É–∂–¥–∞–µ–º–æ–µ
          span.hot__icon.hot__icon--fire
        if !popularArticles || popularArticles.length === 0
          p –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç
        else
          ul.hot__list
            each article in popularArticles
              li.hot__list-item
                a.hot__list-link(href=`/articles/${article.id}`)= article.announce.length > 100 ? `${article.announce.slice(0, 100)}...` : article.announce
                  sup.hot__link-sup= article.commentsCount
      section.main-page__last.last
        h2.last__name
          | –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
          span.last__icon.last__icon--cloud
        if !lastComments || lastComments.length === 0
          p –ó–¥–µ—Å—å –ø–æ–∫–∞ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç
        else
          ul.last__list
            each comment in lastComments
              li.last__list-item
                img.last__list-image(src= `/upload/users/${comment.author.avatar}`, width='20', height='20', alt='–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è')
                b.last__list-name= `${comment.author.name} ${comment.author.surname}`
                if comment.text
                  a.last__list-link(href=`/articles/${comment.article.id}`)= comment.text.length > 100 ? `${comment.text.slice(0, 100)}...` : comment.text
    section.main-page__list.preview
      h2.visually-hidden –°–ø–∏—Å–æ–∫ –ø—Ä–µ–≤—å—é —Å—Ç–∞—Ç–µ–π
      if !articles || articles.length === 0
        .main-page__empty-wrapper
          p.main-page__empty-text –ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ!
      ul.preview__list
        each article in articles
          include _card-article.pug
      if pagination.isActive
        .preview__toggle-wrapper
          ul.preview__pagination.pagination
            li
              a(href=`/?page=${pagination.prev.page}`, aria-label="–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–∑–∞–¥",
                class=`pagination__button button button--backwards ${pagination.prev.status ? `` : `button--disabled`}`) –ù–∞–∑–∞–¥
            each item in pagination.pages
              li(class=`pagination__item ${item.isActive ? `pagination__item--active` : ``}`)
                if item.isActive
                  a= item.page
                else
                  a(href=`/?page=${item.page}`)= item.page
            li
              a(href=`/?page=${pagination.next.page}`, aria-label="–°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤–ø–µ—Ä—ë–¥",
                class=`pagination__button button button--forward ${pagination.next.status ? `` : `button--disabled`}`) –í–ø–µ—Ä–µ–¥
block scripts
  script(src='/js/socket-client.js')
